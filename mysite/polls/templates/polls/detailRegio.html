<!DOCTYPE html>
<html>
{% load static %}
<link rel="stylesheet" href="{% static 'polls/style.css' %}">

<head>
    <title>Regio data</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
    <div>
        <h1>Regio data</h1>
        <div class="row">
            <div class="six columns" style="display: inline-block; width: 49%;">
                <div id="sales-bar-chart2"></div>
            </div>
            <div class="six columns" style="display: inline-block; width: 49%;">
                <div id="sales-bar-chart"></div>
            </div>
        </div>        
    </div>
    <script>
        fetch('/getSalesPerRegion')
        .then(response => response.json())
        .then(data => {
            var sales_per_region = data.sales_per_region;
            Plotly.newPlot('sales-bar-chart', [{
                x: sales_per_region.map(item => item.region),
                y: sales_per_region.map(item => item.total_product_sales),
                type: 'bar',
                title: 'Sales per Region',
            }], {
                title: {
                    text: 'Sales per Region',
                    font: {
                        color: '#ffffff' // Set the title color to white
                    }
                },
                plot_bgcolor: '#212121', // Set the plot background color to black
                paper_bgcolor: '#212121', // Set the paper background color to black
                yaxis: {
                    tickfont: {
                        color: '#ffffff' // Set the font color of the y-axis tick labels to white
                    }
                },
                xaxis: {
                    tickfont: {
                        color: '#ffffff' // Set the font color of the x-axis tick labels to white
                    }
                }
            });
        })
        .catch(error => {
            console.error(error);
        });
        
        fetch('/getSalesAmountPerRegion/')
        .then(response => response.json())
        .then(data => {
            var sales_per_region = data.sales_amount_per_region;
            Plotly.newPlot('sales-bar-chart2', [{
                x: sales_per_region.map(item => item.region),
                y: sales_per_region.map(item => item.total_sales_amount),
                type: 'bar',
                title: 'Total Amount made per Region',
            }], {
                title: {
                    text: 'Total Amount made per Region',
                    font: {
                        color: '#ffffff' // Set the title color to white
                    }
                },
                plot_bgcolor: '#212121', // Set the plot background color to black
                paper_bgcolor: '#212121', // Set the paper background color to black
                yaxis: {
                    tickfont: {
                        color: '#ffffff' // Set the font color of the y-axis tick labels to white
                    }
                },
                xaxis: {
                    tickfont: {
                        color: '#ffffff' // Set the font color of the x-axis tick labels to white
                    }
                }
            });
        })
        .catch(error => {
            console.error(error);
        });
        </script>
</body>
</html>
